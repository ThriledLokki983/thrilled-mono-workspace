// =============================================================================
// UTILITIES
// Main utilities file that forwards all utility functions and mixins
// =============================================================================

@use 'sass:map';
@forward 'design-tokens';
@forward 'utilities/index';
@forward 'foundations/index';
@forward 'utility/typography';

// Common utility mixins and functions
@mixin visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

@mixin focus-ring($color: var(--color-primary-light), $width: 2px, $style: solid) {
  outline: $width $style $color;
  outline-offset: 2px;
}

@mixin button-reset {
  background: none;
  border: none;
  padding: 0;
  font: inherit;
  cursor: pointer;
  outline: inherit;
}

// Alias for button-reset (some components expect this name)
@mixin bare-button {
  @include button-reset;
}

// UI font mixin
@mixin ui-font {
  font-family: var(--font-family-ui, system-ui, -apple-system, 'Segoe UI', 'Roboto', sans-serif);
}

// Font smoothing
@mixin font-smoothing {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

// Z-index function
@function z($layer) {
  $z-indexes: (
    'auto': auto,
    'base': 1,
    'dropdown': 100,
    'sticky': 200,
    'fixed': 300,
    'modal-backdrop': 400,
    'modal': 500,
    'popover': 600,
    'tooltip': 700,
    'toast': 750,
    'skiplinks': 800,
    'notification': 900,
    'max': 999999,
  );

  @if map.has-key($z-indexes, $layer) {
    @return map.get($z-indexes, $layer);
  } @else {
    @error "Unknown z-index layer: #{$layer}. Available layers: #{map.keys($z-indexes)}";
  }
}

// Responsive breakpoint mixins
@mixin mobile-only {
  @media (max-width: 767px) {
    @content;
  }
}

@mixin tablet-up {
  @media (min-width: 768px) {
    @content;
  }
}

@mixin desktop-up {
  @media (min-width: 1024px) {
    @content;
  }
}

@mixin large-desktop-up {
  @media (min-width: 1200px) {
    @content;
  }
}

// Container mixin
@mixin container($max-width: 1200px) {
  width: 100%;
  max-width: $max-width;
  margin: 0 auto;
  padding: 0 var(--space-md, 1rem);
}
